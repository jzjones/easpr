<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="../jquery_webrtc/jq.js"></script>
<script src="../jquery_webrtc/simplewebrtc.js"></script>
<link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="../../css/demo.css" rel="stylesheet">
<script src="../../bootstrap/js/bootstrap.min.js"></script>
<polymer-element name="data-element">
  <template>
  
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    	<div class="container">
        	<div class="navbar-header">
        		
          		<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            		<span class="sr-only">Toggle navigation</span>
            		<span class="icon-bar"></span>
            		<span class="icon-bar"></span>
            		<span class="icon-bar"></span>
          		</button>
          		<a class="navbar-brand" href="#">Easpr Demo</a>
        	</div>
        	<div class="navbar-collapse collapse">
          		<form class="navbar-form navbar-right" role="form">
            		<div class="form-group" id="roomNav">
              			<input type="text" placeholder="Room name" id="roomName" name="roomName" class="form-control">
            		</div>
            		<button type="button" id="joinBtn" class="btn btn-success" on-click="{{joinRoom}}">Join Room</button>
            		<div class="form-group">
              			<span id="roomSpan">RoomName</span>
            		</div>
          		</form>
        	</div><!--/.navbar-collapse -->
      	</div>
    </div>
    <div class="remote-data">
    
    </div>
    <span><input class="local-data" id="message-input"></input><button type="button" id="sendBtn" class = "btn btn-success" on-click="{{sendMessage}}">Send</button></span>
    
    
  </template>

  <script>
  Polymer('data-element',{

  	ready:function(){
  		this.webrtc=new SimpleWebRTC({});
  		console.log(this.webrtc);
  	},

  	joinRoom:function(){
  		console.log("Testing sublime git again");
			if ($('#roomName').val() != "") {

				var roomName = $('#roomName').val();
				$('#roomName').val("");

				$('#roomSpan').html(roomName);
				this.webrtc.joinRoom(roomName);

			} else {
				alert("Room name can't be empty");
			} 
  	},
  	
  	sendMessage: function(){
  		console.log("Send Message Clicked");
  		console.log($("#message-input").val());
  		this.webrtc.sendFile('text-data', $("#message-input").val());
  	}
  });
  </script>
</polymer-element>